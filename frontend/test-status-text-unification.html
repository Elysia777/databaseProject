<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>状态文本统一化测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        .warning { background-color: #fff3cd; color: #856404; }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 3px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background-color: #0056b3; }
        .comparison {
            display: flex;
            gap: 20px;
            margin: 15px 0;
        }
        .comparison > div {
            flex: 1;
            padding: 15px;
            border-radius: 5px;
        }
        .before { background: #fff3cd; }
        .after { background: #d4edda; }
        .status-preview {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 3px;
            margin: 5px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>状态文本统一化测试</h1>

    <div class="test-section">
        <h3>🐛 发现的问题</h3>
        <p>在 <code>order.js</code> 和 <code>PassengerMap.vue</code> 中有两个 <code>getStatusText</code> 方法，逻辑不一致。</p>
    </div>

    <div class="test-section">
        <h3>🔧 重构内容</h3>
        <div class="comparison">
            <div class="before">
                <h4>重构前</h4>
                <ul>
                    <li>两个地方都有 <code>getStatusText</code> 方法</li>
                    <li>order.js 中的方法逻辑简单</li>
                    <li>PassengerMap.vue 中的方法更详细</li>
                    <li>维护困难，容易不一致</li>
                </ul>
            </div>
            <div class="after">
                <h4>重构后</h4>
                <ul>
                    <li>只在 order.js 中保留一个方法</li>
                    <li>使用更详细的逻辑（显示预约时间）</li>
                    <li>PassengerMap.vue 调用 store 中的方法</li>
                    <li>统一管理，逻辑一致</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>📱 状态文本预览</h3>
        <div class="status-preview">
            <strong>SCHEDULED:</strong> 预约单已创建，等待预约时间
        </div>
        <div class="status-preview">
            <strong>PENDING (预约单):</strong> 预约时间已到，正在为您寻找司机...
        </div>
        <div class="status-preview">
            <strong>ASSIGNED (预约单):</strong> 司机已接单，将于预约时间（2025-07-31 14:30:00）前到达上车点
        </div>
        <div class="status-preview">
            <strong>PICKUP (预约单):</strong> 司机已到达上车点，预约时间：2025-07-31 14:30:00，请准备上车
        </div>
        <div class="status-preview">
            <strong>ASSIGNED (实时单):</strong> 司机已接单，正在前往上车点
        </div>
        <div class="status-preview">
            <strong>PICKUP (实时单):</strong> 司机已到达上车点，请准备上车
        </div>
    </div>

    <div class="test-section">
        <h3>🧪 验证测试</h3>
        <p>请在乘客端页面验证状态文本是否正确显示：</p>
        <ol>
            <li>创建一个预约单，检查各个状态的文本显示</li>
            <li>创建一个实时单，检查各个状态的文本显示</li>
            <li>确保预约单显示具体的预约时间</li>
            <li>确保实时单显示简洁的状态文本</li>
        </ol>
        <a href="/passenger-app.html" target="_blank">
            <button>打开乘客端页面</button>
        </a>
    </div>

    <div class="test-section">
        <h3>📋 重构收益</h3>
        <ul>
            <li>✅ <strong>代码统一</strong>：只有一个状态文本逻辑</li>
            <li>✅ <strong>维护简单</strong>：修改一处即可</li>
            <li>✅ <strong>逻辑一致</strong>：所有地方显示相同的文本</li>
            <li>✅ <strong>功能完整</strong>：预约单显示具体时间</li>
            <li>✅ <strong>架构清晰</strong>：业务逻辑集中在 store 中</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>🔍 代码检查</h3>
        <div class="result info">
            <strong>修改的文件：</strong><br>
            1. <code>frontend/src/stores/order.js</code> - 更新 getStatusText 方法<br>
            2. <code>frontend/src/views/PassengerMap.vue</code> - 删除重复方法，使用 store 中的方法
        </div>
    </div>
</body>
</html>