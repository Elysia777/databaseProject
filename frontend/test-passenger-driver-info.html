<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹˜å®¢ç«¯å¸æœºä¿¡æ¯æ˜¾ç¤ºæµ‹è¯•</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus@2.4.4/dist/index.full.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-plus@2.4.4/dist/index.css">
    <style>
        body {
            font-family: 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
            margin: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .test-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            background: #fafafa;
        }
        .demo-section h3 {
            margin-top: 0;
            color: #1f2937;
        }
        
        /* å¤åˆ¶ä¹˜å®¢åœ°å›¾é¡µé¢çš„å¸æœºä¿¡æ¯æ ·å¼ */
        .enhanced-driver-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 16px;
            padding: 20px;
            margin-top: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .driver-card {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .driver-avatar {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        .driver-avatar img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            object-fit: cover;
        }

        .driver-details {
            text-align: center;
            margin-bottom: 15px;
        }

        .driver-details .driver-name {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .driver-rating {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .rating-stars {
            display: flex;
            gap: 2px;
        }

        .star {
            color: #ddd;
            font-size: 14px;
            transition: color 0.2s ease;
        }

        .star.filled {
            color: #ffd700;
        }

        .rating-score {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .driver-details .driver-phone {
            font-size: 14px;
            color: #7f8c8d;
            font-weight: 500;
        }

        .vehicle-details {
            background: #fff;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid #e9ecef;
        }

        .vehicle-info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .vehicle-brand {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .vehicle-color {
            font-size: 14px;
            color: #7f8c8d;
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 6px;
        }

        .vehicle-plate {
            text-align: center;
            margin: 15px 0;
        }

        .plate-number {
            display: inline-block;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            padding: 8px 16px;
            border-radius: 8px;
            border: 2px solid #3498db;
            letter-spacing: 2px;
            box-shadow: 0 2px 4px rgba(52, 152, 219, 0.2);
        }

        .vehicle-type {
            text-align: center;
            font-size: 14px;
            color: #7f8c8d;
            background: #e8f4fd;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            width: 100%;
            box-sizing: border-box;
        }

        .driver-actions {
            display: flex;
            justify-content: center;
            margin-top: 15px;
        }

        .driver-actions .el-button {
            border-radius: 20px;
            padding: 10px 20px;
            font-weight: 500;
        }
        
        .test-button {
            display: inline-block;
            padding: 12px 24px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            border: none;
            cursor: pointer;
        }
        
        .test-button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        
        .test-button.primary {
            background: #667eea;
            font-size: 16px;
            padding: 15px 30px;
        }
        
        .test-button.primary:hover {
            background: #5a67d8;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <div class="test-banner">
                <h1 style="margin: 0; font-size: 28px;">ğŸš— ä¹˜å®¢ç«¯å¸æœºä¿¡æ¯æ˜¾ç¤º</h1>
                <p style="margin: 10px 0 0 0; font-size: 16px;">æµ‹è¯•å¸æœºå¤´åƒã€è½¦å‹ã€è½¦ç‰Œå·æ˜¾ç¤ºæ•ˆæœ</p>
            </div>
            
            <div class="demo-section">
                <h3>ğŸ“‹ åŠŸèƒ½è¯´æ˜</h3>
                <p>ä¹˜å®¢ç«¯ç°åœ¨ä¼šæ˜¾ç¤ºä»¥ä¸‹å¸æœºä¿¡æ¯ï¼š</p>
                <ul>
                    <li><strong>å¸æœºå¤´åƒï¼š</strong> æ˜¾ç¤ºå¸æœºçš„ä¸ªäººå¤´åƒï¼Œå¦‚æœæ²¡æœ‰åˆ™ç”Ÿæˆé»˜è®¤å¤´åƒ</li>
                    <li><strong>å¸æœºå§“åï¼š</strong> æ˜¾ç¤ºå¸æœºçš„çœŸå®å§“å</li>
                    <li><strong>å¸æœºè¯„åˆ†ï¼š</strong> æ˜¾ç¤ºå¸æœºçš„æ˜Ÿçº§è¯„åˆ†</li>
                    <li><strong>è”ç³»ç”µè¯ï¼š</strong> æ˜¾ç¤ºå¸æœºçš„è”ç³»æ–¹å¼</li>
                    <li><strong>è½¦è¾†å“ç‰Œå‹å·ï¼š</strong> æ˜¾ç¤ºè½¦è¾†çš„å“ç‰Œå’Œå‹å·</li>
                    <li><strong>è½¦ç‰Œå·ï¼š</strong> ç‰¹æ®Šæ ·å¼æ˜¾ç¤ºè½¦ç‰Œå·ç </li>
                    <li><strong>è½¦è¾†é¢œè‰²ï¼š</strong> æ˜¾ç¤ºè½¦è¾†é¢œè‰²</li>
                    <li><strong>è½¦è¾†ç±»å‹ï¼š</strong> æ˜¾ç¤ºè½¦è¾†ç±»å‹ï¼ˆç»æµå‹ã€èˆ’é€‚å‹ç­‰ï¼‰</li>
                    <li><strong>æ‹¨æ‰“ç”µè¯ï¼š</strong> ç‚¹å‡»æŒ‰é’®å¯ä»¥ç›´æ¥æ‹¨æ‰“å¸æœºç”µè¯</li>
                </ul>
            </div>

            <div class="demo-section">
                <h3>ğŸ¨ å¸æœºä¿¡æ¯æ˜¾ç¤ºæ•ˆæœæ¼”ç¤º</h3>
                
                <!-- ç¤ºä¾‹1ï¼šå®Œæ•´ä¿¡æ¯çš„å¸æœº -->
                <div class="enhanced-driver-info">
                    <div class="driver-card">
                        <div class="driver-avatar">
                            <img :src="demoDriver1.avatar" :alt="demoDriver1.name" />
                        </div>
                        
                        <div class="driver-details">
                            <div class="driver-name">{{ demoDriver1.name }}</div>
                            <div class="driver-rating">
                                <span class="rating-stars">
                                    <span v-for="i in 5" :key="i" class="star" :class="{ filled: i <= Math.floor(demoDriver1.rating) }">â˜…</span>
                                </span>
                                <span class="rating-score">{{ demoDriver1.rating.toFixed(1) }}</span>
                            </div>
                            <div class="driver-phone">{{ demoDriver1.phone }}</div>
                        </div>
                        
                        <div class="vehicle-details">
                            <div class="vehicle-info-row">
                                <div class="vehicle-brand">{{ demoDriver1.vehicleBrand }} {{ demoDriver1.vehicleModel }}</div>
                                <div class="vehicle-color">{{ demoDriver1.vehicleColor }}</div>
                            </div>
                            <div class="vehicle-plate">
                                <span class="plate-number">{{ demoDriver1.plateNumber }}</span>
                            </div>
                            <div class="vehicle-type">{{ getVehicleTypeText(demoDriver1.vehicleType) }}</div>
                        </div>
                        
                        <div class="driver-actions">
                            <el-button type="primary" size="small" @click="callDriver(demoDriver1)">
                                ğŸ“ æ‹¨æ‰“ç”µè¯
                            </el-button>
                        </div>
                    </div>
                </div>

                <br>

                <!-- ç¤ºä¾‹2ï¼šå¦ä¸€ä¸ªå¸æœº -->
                <div class="enhanced-driver-info">
                    <div class="driver-card">
                        <div class="driver-avatar">
                            <img :src="demoDriver2.avatar" :alt="demoDriver2.name" />
                        </div>
                        
                        <div class="driver-details">
                            <div class="driver-name">{{ demoDriver2.name }}</div>
                            <div class="driver-rating">
                                <span class="rating-stars">
                                    <span v-for="i in 5" :key="i" class="star" :class="{ filled: i <= Math.floor(demoDriver2.rating) }">â˜…</span>
                                </span>
                                <span class="rating-score">{{ demoDriver2.rating.toFixed(1) }}</span>
                            </div>
                            <div class="driver-phone">{{ demoDriver2.phone }}</div>
                        </div>
                        
                        <div class="vehicle-details">
                            <div class="vehicle-info-row">
                                <div class="vehicle-brand">{{ demoDriver2.vehicleBrand }} {{ demoDriver2.vehicleModel }}</div>
                                <div class="vehicle-color">{{ demoDriver2.vehicleColor }}</div>
                            </div>
                            <div class="vehicle-plate">
                                <span class="plate-number">{{ demoDriver2.plateNumber }}</span>
                            </div>
                            <div class="vehicle-type">{{ getVehicleTypeText(demoDriver2.vehicleType) }}</div>
                        </div>
                        
                        <div class="driver-actions">
                            <el-button type="primary" size="small" @click="callDriver(demoDriver2)">
                                ğŸ“ æ‹¨æ‰“ç”µè¯
                            </el-button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>ğŸ”§ æŠ€æœ¯å®ç°</h3>
                <p><strong>åç«¯æ”¹è¿›ï¼š</strong></p>
                <ul>
                    <li>WebSocketé€šçŸ¥æœåŠ¡ä¸­æ·»åŠ äº†è½¦è¾†ä¿¡æ¯æŸ¥è¯¢</li>
                    <li>é€šè¿‡VehicleMapperè·å–å¸æœºçš„æ¿€æ´»è½¦è¾†ä¿¡æ¯</li>
                    <li>è¿”å›å®Œæ•´çš„è½¦è¾†è¯¦ç»†ä¿¡æ¯ï¼ˆå“ç‰Œã€å‹å·ã€é¢œè‰²ã€è½¦ç‰Œå·ç­‰ï¼‰</li>
                </ul>
                
                <p><strong>å‰ç«¯æ”¹è¿›ï¼š</strong></p>
                <ul>
                    <li>å¢å¼ºçš„å¸æœºä¿¡æ¯æ˜¾ç¤ºç»„ä»¶</li>
                    <li>ç¾è§‚çš„è½¦ç‰Œå·ç‰¹æ®Šæ ·å¼</li>
                    <li>å¸æœºå¤´åƒæ˜¾ç¤ºå’Œé»˜è®¤å¤´åƒç”Ÿæˆ</li>
                    <li>æ˜Ÿçº§è¯„åˆ†æ˜¾ç¤º</li>
                    <li>ä¸€é”®æ‹¨æ‰“ç”µè¯åŠŸèƒ½</li>
                </ul>
            </div>

            <div class="demo-section">
                <h3>ğŸ§ª æµ‹è¯•æ­¥éª¤</h3>
                <ol>
                    <li><strong>å¸æœºç«¯ï¼š</strong> ç¡®ä¿å¸æœºå·²æ·»åŠ è½¦è¾†ä¿¡æ¯å¹¶è®¾ç½®ä¸ºæ¿€æ´»çŠ¶æ€</li>
                    <li><strong>ä¹˜å®¢ç«¯ï¼š</strong> åˆ›å»ºè®¢å•å¹¶ç­‰å¾…å¸æœºæ¥å•</li>
                    <li><strong>éªŒè¯æ˜¾ç¤ºï¼š</strong> è®¢å•è¢«æ¥å•åï¼Œæ£€æŸ¥å¸æœºä¿¡æ¯æ˜¯å¦æ­£ç¡®æ˜¾ç¤º</li>
                    <li><strong>åŠŸèƒ½æµ‹è¯•ï¼š</strong> æµ‹è¯•æ‹¨æ‰“ç”µè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸</li>
                </ol>
                
                <div style="text-align: center; margin: 20px 0;">
                    <a href="http://localhost:3000/dashboard/passenger-map" target="_blank" class="test-button primary">
                        ğŸš— æµ‹è¯•ä¹˜å®¢ç«¯åœ°å›¾
                    </a>
                    <a href="http://localhost:3000/dashboard/vehicles" target="_blank" class="test-button">
                        ğŸ”§ å¸æœºè½¦è¾†ç®¡ç†
                    </a>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white; text-align: center;">
                <h3 style="color: white; margin-bottom: 15px;">âœ¨ åŠŸèƒ½å·²å®Œæˆ</h3>
                <p style="color: white; margin-bottom: 20px; font-size: 16px;">
                    ä¹˜å®¢ç«¯ç°åœ¨å¯ä»¥çœ‹åˆ°å¸æœºçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¤´åƒã€è½¦å‹ã€è½¦ç‰Œå·ç­‰
                </p>
                <p style="color: white; margin: 0; font-size: 14px;">
                    è¿™å°†å¸®åŠ©ä¹˜å®¢æ›´å¥½åœ°è¯†åˆ«å¸æœºå’Œè½¦è¾†ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
                </p>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, reactive } = Vue;
        const { ElMessage } = ElementPlus;

        createApp({
            setup() {
                // æ¼”ç¤ºæ•°æ®
                const demoDriver1 = reactive({
                    name: 'å¼ å¸ˆå‚…',
                    phone: '138****8888',
                    rating: 4.8,
                    avatar: getDefaultAvatar('å¼ å¸ˆå‚…'),
                    vehicleBrand: 'ä¸°ç”°',
                    vehicleModel: 'å‡¯ç¾ç‘',
                    vehicleColor: 'ç™½è‰²',
                    plateNumber: 'äº¬A12345',
                    vehicleType: 'COMFORT'
                });

                const demoDriver2 = reactive({
                    name: 'æå¸ˆå‚…',
                    phone: '139****9999',
                    rating: 4.9,
                    avatar: getDefaultAvatar('æå¸ˆå‚…'),
                    vehicleBrand: 'æœ¬ç”°',
                    vehicleModel: 'é›…é˜',
                    vehicleColor: 'é»‘è‰²',
                    plateNumber: 'äº¬B67890',
                    vehicleType: 'PREMIUM'
                });

                // è·å–é»˜è®¤å¤´åƒ
                function getDefaultAvatar(name) {
                    const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8'];
                    const colorIndex = name ? name.charCodeAt(0) % colors.length : 0;
                    const backgroundColor = colors[colorIndex];
                    const firstChar = name ? name.charAt(0).toUpperCase() : 'å¸';
                    
                    const svg = `
                        <svg width="60" height="60" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="30" cy="30" r="30" fill="${backgroundColor}"/>
                            <text x="30" y="38" text-anchor="middle" fill="white" font-size="20" font-weight="bold">${firstChar}</text>
                        </svg>
                    `;
                    
                    return `data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(svg)))}`;
                }

                // è·å–è½¦è¾†ç±»å‹æ–‡æœ¬
                const getVehicleTypeText = (type) => {
                    const typeMap = {
                        'ECONOMY': 'ç»æµå‹',
                        'COMFORT': 'èˆ’é€‚å‹',
                        'PREMIUM': 'é«˜çº§å‹',
                        'LUXURY': 'è±ªåå‹'
                    };
                    return typeMap[type] || 'ç»æµå‹';
                };

                // æ‹¨æ‰“å¸æœºç”µè¯
                const callDriver = (driver) => {
                    ElMessage.info(`æ‹¨æ‰“ç”µè¯ï¼š${driver.phone}`);
                    // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ç”µè¯åŠŸèƒ½
                    if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                        // ç§»åŠ¨è®¾å¤‡ä¸Šç›´æ¥æ‹¨æ‰“
                        // window.location.href = `tel:${driver.phone}`;
                        ElMessage.success('æ­£åœ¨æ‹¨æ‰“ç”µè¯...');
                    } else {
                        // æ¡Œé¢è®¾å¤‡ä¸Šå¤åˆ¶åˆ°å‰ªè´´æ¿
                        if (navigator.clipboard) {
                            navigator.clipboard.writeText(driver.phone).then(() => {
                                ElMessage.success('ç”µè¯å·ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                            });
                        }
                    }
                };

                return {
                    demoDriver1,
                    demoDriver2,
                    getVehicleTypeText,
                    callDriver
                };
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>