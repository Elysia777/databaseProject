<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åç«¯è¿æ¥è¯Šæ–­</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .debug-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .debug-section h3 {
            margin-top: 0;
            color: #333;
        }
        button {
            background: #409EFF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #66b1ff;
        }
        button.success {
            background: #67c23a;
        }
        button.danger {
            background: #f56c6c;
        }
        .status-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .status-good {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .status-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .status-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        .solution {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ åç«¯è¿æ¥è¯Šæ–­å·¥å…·</h1>
        <p>è¯Šæ–­å‰ç«¯æ— æ³•è¿æ¥åç«¯å’Œå¸æœºçŠ¶æ€é—®é¢˜</p>
    </div>

    <div class="container">
        <div class="debug-section">
            <h3>1. åç«¯æœåŠ¡æ£€æŸ¥</h3>
            <button onclick="checkBackendService()">æ£€æŸ¥åç«¯æœåŠ¡</button>
            <button onclick="testApiEndpoints()">æµ‹è¯•APIç«¯ç‚¹</button>
            
            <div id="backendStatus" class="status-display">
                ç‚¹å‡»æŒ‰é’®æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€...
            </div>
        </div>

        <div class="debug-section">
            <h3>2. å¸æœºæ•°æ®æ£€æŸ¥</h3>
            <button onclick="checkDriverData()">æ£€æŸ¥å¸æœºæ•°æ®</button>
            <button onclick="createTestDriver()">åˆ›å»ºæµ‹è¯•å¸æœº</button>
            <button onclick="checkDriverDetail()">æ£€æŸ¥å¸æœºè¯¦æƒ…</button>
            
            <div id="driverDataStatus" class="status-display">
                ç‚¹å‡»æŒ‰é’®æ£€æŸ¥å¸æœºæ•°æ®...
            </div>
        </div>

        <div class="debug-section">
            <h3>3. RedisçŠ¶æ€æ£€æŸ¥</h3>
            <button onclick="checkRedisStatus()">æ£€æŸ¥RedisçŠ¶æ€</button>
            <button onclick="fixDriverRedisStatus()">ä¿®å¤å¸æœºRedisçŠ¶æ€</button>
            
            <div id="redisStatus" class="status-display">
                ç‚¹å‡»æŒ‰é’®æ£€æŸ¥RedisçŠ¶æ€...
            </div>
        </div>

        <div class="debug-section">
            <h3>4. ä¸€é”®ä¿®å¤</h3>
            <button onclick="autoFix()" style="background: #f56c6c; font-size: 16px; padding: 15px 30px;">ğŸš€ ä¸€é”®ä¿®å¤æ‰€æœ‰é—®é¢˜</button>
            
            <div id="autoFixStatus" class="status-display">
                ç‚¹å‡»ä¸€é”®ä¿®å¤æŒ‰é’®å¼€å§‹è‡ªåŠ¨ä¿®å¤...
            </div>
        </div>
    </div>

    <div class="container">
        <h3>ğŸ“‹ è¯Šæ–­æ—¥å¿—</h3>
        <div id="debugLog" style="background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 12px; max-height: 400px; overflow-y: auto;"></div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}\\n`;
            logDiv.textContent += logEntry;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(logEntry);
        }

        async function checkBackendService() {
            const statusDiv = document.getElementById('backendStatus');
            let status = 'åç«¯æœåŠ¡æ£€æŸ¥ç»“æœ:\\n\\n';
            
            log('å¼€å§‹æ£€æŸ¥åç«¯æœåŠ¡...');
            
            // æ£€æŸ¥åŸºæœ¬è¿æ¥
            try {
                const response = await fetch('/api/drivers/online', {
                    method: 'GET',
                    timeout: 5000
                });
                
                if (response.ok) {
                    status += 'âœ… åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ\\n';
                    status += `çŠ¶æ€ç : ${response.status}\\n`;
                    log('âœ… åç«¯æœåŠ¡è¿æ¥æˆåŠŸ');
                } else {
                    status += `âŒ åç«¯æœåŠ¡å“åº”å¼‚å¸¸: ${response.status}\\n`;
                    log(`âŒ åç«¯æœåŠ¡å“åº”å¼‚å¸¸: ${response.status}`);
                }
            } catch (error) {
                status += `âŒ æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡\\n`;
                status += `é”™è¯¯ä¿¡æ¯: ${error.message}\\n`;
                status += `\\nå¯èƒ½çš„åŸå› :\\n`;
                status += `1. åç«¯æœåŠ¡æœªå¯åŠ¨\\n`;
                status += `2. ç«¯å£8080è¢«å ç”¨\\n`;
                status += `3. é˜²ç«å¢™é˜»æ­¢è¿æ¥\\n`;
                status += `4. ä»£ç†é…ç½®é”™è¯¯\\n`;
                
                log(`âŒ åç«¯è¿æ¥å¤±è´¥: ${error.message}`);
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âœ…') ? 'status-display status-good' : 'status-display status-error';
        }

        async function testApiEndpoints() {
            const statusDiv = document.getElementById('backendStatus');
            let status = 'APIç«¯ç‚¹æµ‹è¯•ç»“æœ:\\n\\n';
            
            const endpoints = [
                { path: '/api/drivers/online', name: 'åœ¨çº¿å¸æœºåˆ—è¡¨' },
                { path: '/api/drivers/1', name: 'å¸æœºä¿¡æ¯' },
                { path: '/api/drivers/online/redis', name: 'Redisåœ¨çº¿å¸æœº' },
                { path: '/api/drivers/connections/stats', name: 'è¿æ¥ç»Ÿè®¡' }
            ];
            
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint.path, {
                        method: 'GET',
                        timeout: 3000
                    });
                    
                    if (response.ok) {
                        status += `âœ… ${endpoint.name}: æ­£å¸¸ (${response.status})\\n`;
                        log(`âœ… ${endpoint.name} æµ‹è¯•é€šè¿‡`);
                    } else {
                        status += `âŒ ${endpoint.name}: å¼‚å¸¸ (${response.status})\\n`;
                        log(`âŒ ${endpoint.name} æµ‹è¯•å¤±è´¥: ${response.status}`);
                    }
                } catch (error) {
                    status += `âŒ ${endpoint.name}: è¿æ¥å¤±è´¥\\n`;
                    log(`âŒ ${endpoint.name} è¿æ¥å¤±è´¥: ${error.message}`);
                }
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âŒ') ? 'status-display status-error' : 'status-display status-good';
        }

        async function checkDriverData() {
            const statusDiv = document.getElementById('driverDataStatus');
            let status = 'å¸æœºæ•°æ®æ£€æŸ¥ç»“æœ:\\n\\n';
            
            log('å¼€å§‹æ£€æŸ¥å¸æœºæ•°æ®...');
            
            try {
                // æ£€æŸ¥å¸æœºä¿¡æ¯
                const response = await fetch('/api/drivers/1', {
                    method: 'GET'
                });
                
                if (response.ok) {
                    const driverData = await response.json();
                    status += 'âœ… å¸æœºæ•°æ®å­˜åœ¨\\n';
                    status += `å¸æœºID: ${driverData.data?.id || 'æœªçŸ¥'}\\n`;
                    status += `å¸æœºå§“å: ${driverData.data?.name || 'æœªçŸ¥'}\\n`;
                    status += `å¸æœºçŠ¶æ€: ${driverData.data?.status || 'æœªçŸ¥'}\\n`;
                    log('âœ… å¸æœºæ•°æ®æ£€æŸ¥é€šè¿‡');
                } else if (response.status === 404) {
                    status += 'âŒ å¸æœºæ•°æ®ä¸å­˜åœ¨\\n';
                    status += 'éœ€è¦åœ¨æ•°æ®åº“ä¸­åˆ›å»ºå¸æœºè®°å½•\\n';
                    log('âŒ å¸æœºæ•°æ®ä¸å­˜åœ¨');
                } else {
                    status += `âŒ å¸æœºæ•°æ®æ£€æŸ¥å¤±è´¥: ${response.status}\\n`;
                    log(`âŒ å¸æœºæ•°æ®æ£€æŸ¥å¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                status += `âŒ æ— æ³•æ£€æŸ¥å¸æœºæ•°æ®\\n`;
                status += `é”™è¯¯ä¿¡æ¯: ${error.message}\\n`;
                log(`âŒ å¸æœºæ•°æ®æ£€æŸ¥å¼‚å¸¸: ${error.message}`);
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âœ…') ? 'status-display status-good' : 'status-display status-error';
        }

        async function checkDriverDetail() {
            const statusDiv = document.getElementById('driverDataStatus');
            let status = 'å¸æœºè¯¦ç»†çŠ¶æ€æ£€æŸ¥ç»“æœ:\\n\\n';
            
            log('å¼€å§‹æ£€æŸ¥å¸æœºè¯¦ç»†çŠ¶æ€...');
            
            try {
                const response = await fetch('/api/drivers/1/status-detail', {
                    method: 'GET'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const detail = result.data;
                    
                    status += '=== æ•°æ®åº“çŠ¶æ€ ===\\n';
                    if (detail.database) {
                        status += `âœ… æ•°æ®åº“ä¸­å­˜åœ¨å¸æœºè®°å½•\\n`;
                        status += `å§“å: ${detail.database.name}\\n`;
                        status += `çŠ¶æ€: ${detail.database.status}\\n`;
                        status += `ä½ç½®: ${detail.database.currentLatitude}, ${detail.database.currentLongitude}\\n`;
                    } else {
                        status += `âŒ æ•°æ®åº“ä¸­ä¸å­˜åœ¨å¸æœºè®°å½•\\n`;
                    }
                    
                    status += '\\n=== RedisçŠ¶æ€ ===\\n';
                    if (detail.redis) {
                        status += `âœ… Redisä¸­å­˜åœ¨å¸æœºä¿¡æ¯\\n`;
                        status += `å§“å: ${detail.redis.name}\\n`;
                        status += `çŠ¶æ€: ${detail.redis.status}\\n`;
                    } else {
                        status += `âŒ Redisä¸­ä¸å­˜åœ¨å¸æœºä¿¡æ¯\\n`;
                    }
                    
                    status += `\\nåœ¨çº¿ä¸”ç©ºé—²: ${detail.isOnlineAndFree ? 'âœ… æ˜¯' : 'âŒ å¦'}\\n`;
                    
                    if (detail.geoPosition) {
                        status += `GEOä½ç½®: ${detail.geoPosition.x}, ${detail.geoPosition.y}\\n`;
                    } else {
                        status += `âŒ GEOä½ç½®ä¸å­˜åœ¨\\n`;
                    }
                    
                    status += '\\n=== ä¸€è‡´æ€§æ£€æŸ¥ ===\\n';
                    status += `æ•°æ®åº“å­˜åœ¨: ${detail.consistency.dbExists ? 'âœ…' : 'âŒ'}\\n`;
                    status += `Rediså­˜åœ¨: ${detail.consistency.redisExists ? 'âœ…' : 'âŒ'}\\n`;
                    status += `çŠ¶æ€åŒ¹é…: ${detail.consistency.statusMatch ? 'âœ…' : 'âŒ'}\\n`;
                    
                    log('âœ… å¸æœºè¯¦ç»†çŠ¶æ€æ£€æŸ¥å®Œæˆ');
                } else {
                    status += `âŒ æ£€æŸ¥å¤±è´¥: ${response.status}\\n`;
                    log(`âŒ å¸æœºè¯¦ç»†çŠ¶æ€æ£€æŸ¥å¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                status += `âŒ æ£€æŸ¥å¼‚å¸¸: ${error.message}\\n`;
                log(`âŒ å¸æœºè¯¦ç»†çŠ¶æ€æ£€æŸ¥å¼‚å¸¸: ${error.message}`);
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âŒ') ? 'status-display status-error' : 'status-display status-good';
        }

        async function createTestDriver() {
            const statusDiv = document.getElementById('driverDataStatus');
            let status = 'åˆ›å»ºæµ‹è¯•å¸æœºç»“æœ:\\n\\n';
            
            log('å¼€å§‹åˆ›å»ºæµ‹è¯•å¸æœº...');
            
            try {
                const driverData = {
                    name: 'æµ‹è¯•å¸æœº',
                    phone: '13800138000',
                    licenseNumber: 'TEST001',
                    vehicleInfo: 'æµ‹è¯•è½¦è¾†',
                    status: 'AVAILABLE'
                };
                
                const response = await fetch('/api/drivers', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(driverData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    status += 'âœ… æµ‹è¯•å¸æœºåˆ›å»ºæˆåŠŸ\\n';
                    status += `å¸æœºID: ${result.data?.id || 'æœªçŸ¥'}\\n`;
                    log('âœ… æµ‹è¯•å¸æœºåˆ›å»ºæˆåŠŸ');
                } else {
                    status += `âŒ æµ‹è¯•å¸æœºåˆ›å»ºå¤±è´¥: ${response.status}\\n`;
                    log(`âŒ æµ‹è¯•å¸æœºåˆ›å»ºå¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                status += `âŒ åˆ›å»ºæµ‹è¯•å¸æœºå¼‚å¸¸\\n`;
                status += `é”™è¯¯ä¿¡æ¯: ${error.message}\\n`;
                log(`âŒ åˆ›å»ºæµ‹è¯•å¸æœºå¼‚å¸¸: ${error.message}`);
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âœ…') ? 'status-display status-good' : 'status-display status-error';
        }

        async function checkRedisStatus() {
            const statusDiv = document.getElementById('redisStatus');
            let status = 'RedisçŠ¶æ€æ£€æŸ¥ç»“æœ:\\n\\n';
            
            log('å¼€å§‹æ£€æŸ¥RedisçŠ¶æ€...');
            
            try {
                // æ£€æŸ¥åœ¨çº¿å¸æœº
                const response = await fetch('/api/drivers/online/redis', {
                    method: 'GET'
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const drivers = result.data || [];
                    status += `âœ… Redisè¿æ¥æ­£å¸¸\\n`;
                    status += `åœ¨çº¿å¸æœºæ•°é‡: ${drivers.length}\\n`;
                    
                    if (drivers.length > 0) {
                        status += '\\nåœ¨çº¿å¸æœºåˆ—è¡¨:\\n';
                        drivers.forEach(driver => {
                            status += `- å¸æœº${driver.id}: ${driver.name}\\n`;
                        });
                    } else {
                        status += '\\nâŒ æ²¡æœ‰åœ¨çº¿å¸æœº\\n';
                        status += 'éœ€è¦å¸æœºé‡æ–°ä¸Šçº¿\\n';
                    }
                    
                    log('âœ… RedisçŠ¶æ€æ£€æŸ¥é€šè¿‡');
                } else {
                    status += `âŒ RedisçŠ¶æ€æ£€æŸ¥å¤±è´¥: ${response.status}\\n`;
                    log(`âŒ RedisçŠ¶æ€æ£€æŸ¥å¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                status += `âŒ æ— æ³•æ£€æŸ¥RedisçŠ¶æ€\\n`;
                status += `é”™è¯¯ä¿¡æ¯: ${error.message}\\n`;
                log(`âŒ RedisçŠ¶æ€æ£€æŸ¥å¼‚å¸¸: ${error.message}`);
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âœ…') && !status.includes('æ²¡æœ‰åœ¨çº¿å¸æœº') ? 'status-display status-good' : 'status-display status-warning';
        }

        async function fixDriverRedisStatus() {
            const statusDiv = document.getElementById('redisStatus');
            let status = 'ä¿®å¤å¸æœºRedisçŠ¶æ€ç»“æœ:\\n\\n';
            
            log('å¼€å§‹ä¿®å¤å¸æœºRedisçŠ¶æ€...');
            
            try {
                // ä½¿ç”¨æ–°çš„ä¿®å¤æ¥å£
                const response = await fetch('/api/drivers/fix-redis-status', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        status += 'âœ… RedisçŠ¶æ€ä¿®å¤æˆåŠŸ\\n\\n';
                        status += result.data;
                        log('âœ… RedisçŠ¶æ€ä¿®å¤æˆåŠŸ');
                    } else {
                        status += `âŒ RedisçŠ¶æ€ä¿®å¤å¤±è´¥: ${result.message}\\n`;
                        log(`âŒ RedisçŠ¶æ€ä¿®å¤å¤±è´¥: ${result.message}`);
                    }
                    
                    // é‡æ–°æ£€æŸ¥çŠ¶æ€
                    setTimeout(() => {
                        checkRedisStatus();
                    }, 2000);
                } else {
                    status += `âŒ ä¿®å¤è¯·æ±‚å¤±è´¥: ${response.status}\\n`;
                    log(`âŒ ä¿®å¤è¯·æ±‚å¤±è´¥: ${response.status}`);
                }
            } catch (error) {
                status += `âŒ ä¿®å¤å¸æœºRedisçŠ¶æ€å¼‚å¸¸\\n`;
                status += `é”™è¯¯ä¿¡æ¯: ${error.message}\\n`;
                log(`âŒ ä¿®å¤å¸æœºRedisçŠ¶æ€å¼‚å¸¸: ${error.message}`);
            }
            
            statusDiv.textContent = status;
            statusDiv.className = status.includes('âœ…') ? 'status-display status-good' : 'status-display status-error';
        }

        async function autoFix() {
            const statusDiv = document.getElementById('autoFixStatus');
            let status = 'ğŸš€ ä¸€é”®ä¿®å¤è¿›è¡Œä¸­...\\n\\n';
            statusDiv.textContent = status;
            statusDiv.className = 'status-display status-warning';
            
            log('å¼€å§‹ä¸€é”®ä¿®å¤...');
            
            try {
                // æ­¥éª¤1: æ£€æŸ¥åç«¯æœåŠ¡
                status += 'æ­¥éª¤1: æ£€æŸ¥åç«¯æœåŠ¡...\\n';
                statusDiv.textContent = status;
                await checkBackendService();
                
                // æ­¥éª¤2: æ£€æŸ¥å¹¶åˆ›å»ºå¸æœºæ•°æ®
                status += 'æ­¥éª¤2: æ£€æŸ¥å¸æœºæ•°æ®...\\n';
                statusDiv.textContent = status;
                await checkDriverData();
                
                // å¦‚æœå¸æœºä¸å­˜åœ¨ï¼Œåˆ›å»ºæµ‹è¯•å¸æœº
                try {
                    const driverResponse = await fetch('/api/drivers/1');
                    if (!driverResponse.ok) {
                        status += 'æ­¥éª¤2.1: åˆ›å»ºæµ‹è¯•å¸æœº...\\n';
                        statusDiv.textContent = status;
                        await createTestDriver();
                    }
                } catch (e) {
                    status += 'æ­¥éª¤2.1: åˆ›å»ºæµ‹è¯•å¸æœº...\\n';
                    statusDiv.textContent = status;
                    await createTestDriver();
                }
                
                // æ­¥éª¤3: ä¿®å¤RedisçŠ¶æ€
                status += 'æ­¥éª¤3: ä¿®å¤RedisçŠ¶æ€...\\n';
                statusDiv.textContent = status;
                await fixDriverRedisStatus();
                
                // æ­¥éª¤4: æœ€ç»ˆéªŒè¯
                status += 'æ­¥éª¤4: æœ€ç»ˆéªŒè¯...\\n';
                statusDiv.textContent = status;
                
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const finalCheck = await fetch('/api/drivers/online/redis');
                if (finalCheck.ok) {
                    const result = await finalCheck.json();
                    const drivers = result.data || [];
                    
                    if (drivers.length > 0) {
                        status += '\\nâœ… ä¿®å¤å®Œæˆï¼\\n';
                        status += `å‘ç° ${drivers.length} ä¸ªåœ¨çº¿å¸æœº\\n`;
                        status += '\\nç°åœ¨å¯ä»¥æµ‹è¯•è®¢å•æ¨é€åŠŸèƒ½äº†ï¼\\n';
                        statusDiv.className = 'status-display status-good';
                        log('âœ… ä¸€é”®ä¿®å¤å®Œæˆ');
                    } else {
                        status += '\\nâš ï¸  ä¿®å¤éƒ¨åˆ†å®Œæˆ\\n';
                        status += 'å¸æœºæ•°æ®å·²ä¿®å¤ï¼Œä½†å¯èƒ½éœ€è¦æ‰‹åŠ¨ä¸Šçº¿\\n';
                        statusDiv.className = 'status-display status-warning';
                        log('âš ï¸  ä¸€é”®ä¿®å¤éƒ¨åˆ†å®Œæˆ');
                    }
                } else {
                    status += '\\nâŒ æœ€ç»ˆéªŒè¯å¤±è´¥\\n';
                    status += 'è¯·æ‰‹åŠ¨æ£€æŸ¥å„ä¸ªç»„ä»¶çŠ¶æ€\\n';
                    statusDiv.className = 'status-display status-error';
                    log('âŒ ä¸€é”®ä¿®å¤éªŒè¯å¤±è´¥');
                }
                
            } catch (error) {
                status += `\\nâŒ ä¿®å¤è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸\\n`;
                status += `é”™è¯¯ä¿¡æ¯: ${error.message}\\n`;
                statusDiv.className = 'status-display status-error';
                log(`âŒ ä¸€é”®ä¿®å¤å¼‚å¸¸: ${error.message}`);
            }
            
            statusDiv.textContent = status;
        }

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        window.onload = function() {
            log('åç«¯è¿æ¥è¯Šæ–­å·¥å…·å·²åŠ è½½');
            
            log('æ£€æµ‹åˆ°çš„é—®é¢˜:');
            log('1. ECONNREFUSED - æ— æ³•è¿æ¥åç«¯');
            log('2. å¸æœºä¿¡æ¯ä¸å®Œæ•´');
            log('3. å¸æœºæœªå»ºç«‹è¿æ¥');
            
            // è‡ªåŠ¨å¼€å§‹åŸºæœ¬æ£€æŸ¥
            setTimeout(() => {
                checkBackendService();
            }, 1000);
        };
    </script>
</body>
</html>