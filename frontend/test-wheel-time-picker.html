<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ»šè½®æ—¶é—´é€‰æ‹©å™¨æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        .warning { background-color: #fff3cd; color: #856404; }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 3px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background-color: #0056b3; }
        .time-display {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin: 10px 0;
        }
        .feature-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>æ»šè½®æ—¶é—´é€‰æ‹©å™¨åŠŸèƒ½æµ‹è¯•</h1>

    <div class="test-section">
        <h3>ğŸ¯ æ–°åŠŸèƒ½ç‰¹ç‚¹</h3>
        <div class="feature-list">
            <ul>
                <li>âœ… æ»šè½®å¼é€‰æ‹©æ—¥æœŸã€å°æ—¶ã€åˆ†é’Ÿ</li>
                <li>âœ… ä»Šå¤©çš„æ—¶é—´åªèƒ½ä»30åˆ†é’Ÿåå¼€å§‹é€‰æ‹©</li>
                <li>âœ… åˆ†é’Ÿé€‰æ‹©ä»¥15åˆ†é’Ÿä¸ºé—´éš”ï¼ˆ00, 15, 30, 45ï¼‰</li>
                <li>âœ… æ”¯æŒæœªæ¥7å¤©çš„é¢„çº¦</li>
                <li>âœ… ç›´è§‚çš„"ä»Šå¤©"ã€"æ˜å¤©"æ˜¾ç¤º</li>
                <li>âœ… ç§»åŠ¨ç«¯å‹å¥½çš„ç•Œé¢</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h3>ğŸ• å½“å‰æ—¶é—´ä¿¡æ¯</h3>
        <div id="currentTimeInfo" class="info"></div>
    </div>

    <div class="test-section">
        <h3>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h3>
        <button onclick="testTimeValidation()">æµ‹è¯•æ—¶é—´éªŒè¯é€»è¾‘</button>
        <button onclick="testDateGeneration()">æµ‹è¯•æ—¥æœŸç”Ÿæˆ</button>
        <button onclick="testHourGeneration()">æµ‹è¯•å°æ—¶ç”Ÿæˆ</button>
        <button onclick="testMinuteGeneration()">æµ‹è¯•åˆ†é’Ÿç”Ÿæˆ</button>
        <div id="testResult" class="result"></div>
    </div>

    <div class="test-section">
        <h3>ğŸ“± å®é™…ä½¿ç”¨æµ‹è¯•</h3>
        <p>è¯·åˆ°ä¹˜å®¢åœ°å›¾é¡µé¢æµ‹è¯•å®é™…çš„æ—¶é—´é€‰æ‹©å™¨åŠŸèƒ½ï¼š</p>
        <ol>
            <li>åˆ‡æ¢åˆ°"é¢„çº¦å•"æ¨¡å¼</li>
            <li>ç‚¹å‡»"é€‰æ‹©æ—¶é—´"æŒ‰é’®</li>
            <li>æµ‹è¯•æ»šè½®é€‰æ‹©åŠŸèƒ½</li>
            <li>éªŒè¯æ—¶é—´é™åˆ¶æ˜¯å¦æ­£ç¡®</li>
        </ol>
        <a href="/passenger-app.html" target="_blank">
            <button>æ‰“å¼€ä¹˜å®¢åœ°å›¾é¡µé¢</button>
        </a>
    </div>

    <div class="test-section">
        <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
        <div id="overallResult" class="result"></div>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰æ—¶é—´ä¿¡æ¯
        function updateCurrentTimeInfo() {
            const now = new Date();
            const minTime = new Date(now.getTime() + 30 * 60 * 1000);
            
            const info = `
                <strong>å½“å‰æ—¶é—´:</strong> ${now.toLocaleString()}<br>
                <strong>æœ€æ—©é¢„çº¦æ—¶é—´:</strong> ${minTime.toLocaleString()}<br>
                <strong>å½“å‰å°æ—¶:</strong> ${now.getHours()}<br>
                <strong>å½“å‰åˆ†é’Ÿ:</strong> ${now.getMinutes()}<br>
                <strong>30åˆ†é’Ÿåå°æ—¶:</strong> ${minTime.getHours()}<br>
                <strong>30åˆ†é’Ÿååˆ†é’Ÿ:</strong> ${minTime.getMinutes()}
            `;
            
            document.getElementById('currentTimeInfo').innerHTML = info;
        }

        // æµ‹è¯•æ—¶é—´éªŒè¯é€»è¾‘
        function testTimeValidation() {
            const resultDiv = document.getElementById('testResult');
            const now = new Date();
            
            // æµ‹è¯•ç”¨ä¾‹
            const testCases = [
                {
                    name: 'å½“å‰æ—¶é—´',
                    time: now,
                    shouldBeValid: false
                },
                {
                    name: '15åˆ†é’Ÿå',
                    time: new Date(now.getTime() + 15 * 60 * 1000),
                    shouldBeValid: false
                },
                {
                    name: '30åˆ†é’Ÿå',
                    time: new Date(now.getTime() + 30 * 60 * 1000),
                    shouldBeValid: true
                },
                {
                    name: '1å°æ—¶å',
                    time: new Date(now.getTime() + 60 * 60 * 1000),
                    shouldBeValid: true
                },
                {
                    name: '8å¤©å',
                    time: new Date(now.getTime() + 8 * 24 * 60 * 60 * 1000),
                    shouldBeValid: false
                }
            ];
            
            let html = '<div class="info"><strong>æ—¶é—´éªŒè¯æµ‹è¯•ç»“æœ:</strong><br>';
            let passCount = 0;
            
            testCases.forEach(testCase => {
                const isValid = validateTime(testCase.time);
                const passed = isValid === testCase.shouldBeValid;
                const icon = passed ? 'âœ…' : 'âŒ';
                
                if (passed) passCount++;
                
                html += `${icon} ${testCase.name}: ${testCase.time.toLocaleString()} - ${isValid ? 'æœ‰æ•ˆ' : 'æ— æ•ˆ'}<br>`;
            });
            
            html += `<br><strong>é€šè¿‡ç‡: ${passCount}/${testCases.length}</strong></div>`;
            resultDiv.innerHTML = html;
        }

        // éªŒè¯æ—¶é—´æ˜¯å¦æœ‰æ•ˆ
        function validateTime(time) {
            const now = new Date();
            const minTime = new Date(now.getTime() + 30 * 60 * 1000);
            const maxTime = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);
            
            return time >= minTime && time <= maxTime;
        }

        // æµ‹è¯•æ—¥æœŸç”Ÿæˆ
        function testDateGeneration() {
            const resultDiv = document.getElementById('testResult');
            const now = new Date();
            
            let html = '<div class="info"><strong>æ—¥æœŸç”Ÿæˆæµ‹è¯•:</strong><br>';
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(now);
                date.setDate(date.getDate() + i);
                
                let label;
                if (i === 0) {
                    label = 'ä»Šå¤©';
                } else if (i === 1) {
                    label = 'æ˜å¤©';
                } else {
                    label = `${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
                }
                
                html += `ç¬¬${i + 1}å¤©: ${label} (${date.toDateString()})<br>`;
            }
            
            html += '</div>';
            resultDiv.innerHTML = html;
        }

        // æµ‹è¯•å°æ—¶ç”Ÿæˆ
        function testHourGeneration() {
            const resultDiv = document.getElementById('testResult');
            const now = new Date();
            
            let html = '<div class="info"><strong>å°æ—¶ç”Ÿæˆæµ‹è¯•:</strong><br>';
            
            // æµ‹è¯•ä»Šå¤©çš„å°æ—¶
            const minTime = new Date(now.getTime() + 30 * 60 * 1000);
            const startHour = minTime.getHours();
            
            html += `<strong>ä»Šå¤©å¯é€‰å°æ—¶:</strong> `;
            for (let hour = startHour; hour <= 23; hour++) {
                html += `${hour}, `;
            }
            html += '<br>';
            
            // æµ‹è¯•æ˜å¤©çš„å°æ—¶
            html += `<strong>æ˜å¤©å¯é€‰å°æ—¶:</strong> 0-23 (å…¨å¤©)<br>`;
            
            html += '</div>';
            resultDiv.innerHTML = html;
        }

        // æµ‹è¯•åˆ†é’Ÿç”Ÿæˆ
        function testMinuteGeneration() {
            const resultDiv = document.getElementById('testResult');
            const now = new Date();
            
            let html = '<div class="info"><strong>åˆ†é’Ÿç”Ÿæˆæµ‹è¯•:</strong><br>';
            
            // æµ‹è¯•ä»Šå¤©å½“å‰å°æ—¶çš„åˆ†é’Ÿ
            const currentHour = now.getHours();
            const minTime = new Date(now.getTime() + 30 * 60 * 1000);
            
            if (currentHour === minTime.getHours()) {
                const startMinute = Math.ceil(minTime.getMinutes() / 15) * 15;
                html += `<strong>ä»Šå¤©${currentHour}ç‚¹å¯é€‰åˆ†é’Ÿ:</strong> `;
                for (let minute = startMinute; minute <= 45; minute += 15) {
                    html += `${minute}, `;
                }
                html += '<br>';
            }
            
            // æµ‹è¯•å…¶ä»–æƒ…å†µçš„åˆ†é’Ÿ
            html += `<strong>å…¶ä»–æ—¶é—´å¯é€‰åˆ†é’Ÿ:</strong> 0, 15, 30, 45<br>`;
            
            html += '</div>';
            resultDiv.innerHTML = html;
        }

        // é¡µé¢åŠ è½½æ—¶æ›´æ–°æ—¶é—´ä¿¡æ¯
        window.onload = function() {
            updateCurrentTimeInfo();
            
            // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´ä¿¡æ¯
            setInterval(updateCurrentTimeInfo, 60000);
        };
    </script>
</body>
</html>