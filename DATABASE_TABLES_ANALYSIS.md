# æ•°æ®åº“è¡¨ç»“æ„åˆ†æ

## ğŸ“Š å½“å‰ä½¿ç”¨çš„è¡¨

æ ¹æ®é¡¹ç›®ä»£ç åˆ†æï¼Œå½“å‰ç½‘çº¦è½¦ç³»ç»Ÿä½¿ç”¨äº†ä»¥ä¸‹5ä¸ªä¸»è¦æ•°æ®è¡¨ï¼š

### 1. **users** è¡¨ - ç”¨æˆ·åŸºç¡€ä¿¡æ¯è¡¨ âœ… **æ­£åœ¨ä½¿ç”¨**
**ç”¨é€”**: å­˜å‚¨æ‰€æœ‰ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ã€å¸æœºã€ä¹˜å®¢ï¼‰çš„åŸºç¡€ä¿¡æ¯

**å­—æ®µ**:
- `id` - ç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰
- `username` - ç”¨æˆ·å
- `password` - å¯†ç 
- `phone` - æ‰‹æœºå·
- `email` - é‚®ç®±
- `real_name` - çœŸå®å§“å
- `id_card` - èº«ä»½è¯å·
- `avatar` - å¤´åƒURL
- `user_type` - ç”¨æˆ·ç±»å‹ï¼ˆADMIN/DRIVER/PASSENGERï¼‰
- `status` - ç”¨æˆ·çŠ¶æ€ï¼ˆACTIVE/INACTIVE/BANNEDï¼‰
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

**ä½¿ç”¨æƒ…å†µ**: 
- âœ… ç”¨æˆ·ç™»å½•è®¤è¯
- âœ… ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- âœ… æƒé™æ§åˆ¶

### 2. **drivers** è¡¨ - å¸æœºä¸“ä¸šä¿¡æ¯è¡¨ âœ… **æ­£åœ¨ä½¿ç”¨**
**ç”¨é€”**: å­˜å‚¨å¸æœºçš„ä¸“ä¸šä¿¡æ¯å’ŒçŠ¶æ€

**å­—æ®µ**:
- `id` - å¸æœºIDï¼ˆä¸»é”®ï¼‰
- `user_id` - å…³è”ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- `driver_license` - é©¾é©¶è¯å·
- `driver_license_expiry` - é©¾é©¶è¯åˆ°æœŸæ—¥æœŸ
- `professional_license` - ä»ä¸šèµ„æ ¼è¯å·
- `professional_license_expiry` - ä»ä¸šèµ„æ ¼è¯åˆ°æœŸæ—¥æœŸ
- `driving_years` - é©¾é¾„
- `total_mileage` - æ€»é‡Œç¨‹
- `rating` - è¯„åˆ†
- `total_orders` - æ€»è®¢å•æ•°
- `completed_orders` - å®Œæˆè®¢å•æ•°
- `cancelled_orders` - å–æ¶ˆè®¢å•æ•°
- `is_online` - æ˜¯å¦åœ¨çº¿
- `current_latitude` - å½“å‰çº¬åº¦
- `current_longitude` - å½“å‰ç»åº¦
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

**ä½¿ç”¨æƒ…å†µ**:
- âœ… å¸æœºä¸Šçº¿/ä¸‹çº¿ç®¡ç†
- âœ… å¸æœºä½ç½®è¿½è¸ª
- âœ… å¸æœºè¯„åˆ†ç»Ÿè®¡
- âœ… è®¢å•åˆ†é…

### 3. **vehicles** è¡¨ - è½¦è¾†ä¿¡æ¯è¡¨ âœ… **æ­£åœ¨ä½¿ç”¨**
**ç”¨é€”**: å­˜å‚¨å¸æœºçš„è½¦è¾†ä¿¡æ¯

**å­—æ®µ**:
- `id` - è½¦è¾†IDï¼ˆä¸»é”®ï¼‰
- `driver_id` - å¸æœºIDï¼ˆå¤–é”®ï¼‰
- `plate_number` - è½¦ç‰Œå·
- `brand` - å“ç‰Œ
- `model` - å‹å·
- `color` - é¢œè‰²
- `year` - å¹´ä»½
- `seats` - åº§ä½æ•°
- `vehicle_type` - è½¦è¾†ç±»å‹ï¼ˆECONOMY/COMFORT/PREMIUMï¼‰
- `fuel_type` - ç‡ƒæ–™ç±»å‹
- `insurance_number` - ä¿é™©å•å·
- `insurance_expiry` - ä¿é™©åˆ°æœŸæ—¥æœŸ
- `inspection_expiry` - å¹´æ£€åˆ°æœŸæ—¥æœŸ
- `is_active` - æ˜¯å¦æ¿€æ´»
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

**ä½¿ç”¨æƒ…å†µ**:
- âœ… å¸æœºè½¦è¾†ç®¡ç†
- âœ… ä¹˜å®¢ç«¯æ˜¾ç¤ºå¸æœºè½¦è¾†ä¿¡æ¯
- âœ… è½¦è¾†ç±»å‹é€‰æ‹©

### 4. **orders** è¡¨ - è®¢å•ä¿¡æ¯è¡¨ âœ… **æ­£åœ¨ä½¿ç”¨**
**ç”¨é€”**: å­˜å‚¨æ‰€æœ‰è®¢å•ä¿¡æ¯

**å­—æ®µ**:
- `id` - è®¢å•IDï¼ˆä¸»é”®ï¼‰
- `order_number` - è®¢å•å·
- `passenger_id` - ä¹˜å®¢ID
- `driver_id` - å¸æœºID
- `vehicle_id` - è½¦è¾†ID
- `order_type` - è®¢å•ç±»å‹ï¼ˆREAL_TIME/RESERVATIONï¼‰
- `status` - è®¢å•çŠ¶æ€ï¼ˆPENDING/ASSIGNED/PICKUP/IN_PROGRESS/COMPLETED/CANCELLEDï¼‰
- `pickup_address` - ä¸Šè½¦åœ°å€
- `pickup_latitude` - ä¸Šè½¦çº¬åº¦
- `pickup_longitude` - ä¸Šè½¦ç»åº¦
- `destination_address` - ç›®çš„åœ°åœ°å€
- `destination_latitude` - ç›®çš„åœ°çº¬åº¦
- `destination_longitude` - ç›®çš„åœ°ç»åº¦
- `estimated_distance` - é¢„ä¼°è·ç¦»
- `estimated_duration` - é¢„ä¼°æ—¶é•¿
- `estimated_fare` - é¢„ä¼°è´¹ç”¨
- `actual_distance` - å®é™…è·ç¦»
- `actual_duration` - å®é™…æ—¶é•¿
- `actual_fare` - å®é™…è´¹ç”¨
- `service_fee` - æœåŠ¡è´¹
- `total_fare` - æ€»è´¹ç”¨
- `payment_method` - æ”¯ä»˜æ–¹å¼
- `payment_status` - æ”¯ä»˜çŠ¶æ€
- `scheduled_time` - é¢„çº¦æ—¶é—´
- `pickup_time` - ä¸Šè½¦æ—¶é—´
- `completion_time` - å®Œæˆæ—¶é—´
- `cancel_reason` - å–æ¶ˆåŸå› 
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

**ä½¿ç”¨æƒ…å†µ**:
- âœ… è®¢å•åˆ›å»ºå’Œç®¡ç†
- âœ… è®¢å•çŠ¶æ€è·Ÿè¸ª
- âœ… é¢„çº¦å•åŠŸèƒ½
- âœ… è´¹ç”¨è®¡ç®—
- âœ… å¸æœºæ”¶å…¥ç»Ÿè®¡

### 5. **passengers** è¡¨ - ä¹˜å®¢ä¸“ä¸šä¿¡æ¯è¡¨ âš ï¸ **å®šä¹‰äº†ä½†å¾ˆå°‘ä½¿ç”¨**
**ç”¨é€”**: å­˜å‚¨ä¹˜å®¢çš„ä¸“ä¸šä¿¡æ¯

**å­—æ®µ**:
- `id` - ä¹˜å®¢IDï¼ˆä¸»é”®ï¼‰
- `user_id` - å…³è”ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰
- `emergency_contact` - ç´§æ€¥è”ç³»äºº
- `emergency_phone` - ç´§æ€¥è”ç³»äººç”µè¯
- `default_payment_method` - é»˜è®¤æ”¯ä»˜æ–¹å¼
- `rating` - è¯„åˆ†
- `total_orders` - æ€»è®¢å•æ•°
- `total_spent` - æ€»æ¶ˆè´¹é‡‘é¢
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

**ä½¿ç”¨æƒ…å†µ**:
- âš ï¸ **å¾ˆå°‘ä½¿ç”¨** - ç›®å‰ç³»ç»Ÿä¸»è¦ç›´æ¥ä½¿ç”¨usersè¡¨ä¸­çš„ç”¨æˆ·IDä½œä¸ºä¹˜å®¢ID
- ğŸ”§ **å¯ä»¥ä¼˜åŒ–** - å¯ä»¥ç”¨æ¥å­˜å‚¨ä¹˜å®¢çš„è¯¦ç»†ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®

## ğŸ“ˆ è¡¨ä½¿ç”¨é¢‘ç‡åˆ†æ

### é«˜é¢‘ä½¿ç”¨ ğŸ”¥
1. **orders** - æ¯æ¬¡ä¸‹å•ã€æ¥å•ã€çŠ¶æ€æ›´æ–°éƒ½ä¼šæ“ä½œ
2. **drivers** - å¸æœºä¸Šçº¿ã€ä½ç½®æ›´æ–°ã€çŠ¶æ€æŸ¥è¯¢é¢‘ç¹
3. **users** - ç™»å½•è®¤è¯ã€ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢

### ä¸­é¢‘ä½¿ç”¨ ğŸ“Š
4. **vehicles** - å¸æœºè½¦è¾†ç®¡ç†ã€ä¹˜å®¢æŸ¥çœ‹å¸æœºä¿¡æ¯æ—¶ä½¿ç”¨

### ä½é¢‘ä½¿ç”¨ âš ï¸
5. **passengers** - ç›®å‰åŸºæœ¬æœªä½¿ç”¨ï¼Œä¸»è¦ç”¨usersè¡¨ä»£æ›¿

## ğŸ”§ ä¼˜åŒ–å»ºè®®

### 1. passengersè¡¨çš„åˆ©ç”¨
**å½“å‰é—®é¢˜**: passengersè¡¨å®šä¹‰äº†ä½†å¾ˆå°‘ä½¿ç”¨ï¼Œä¹˜å®¢ç›¸å…³åŠŸèƒ½ä¸»è¦ä¾èµ–usersè¡¨

**å»ºè®®**:
- å¯ä»¥ç”¨æ¥å­˜å‚¨ä¹˜å®¢çš„è¯¦ç»†åå¥½è®¾ç½®
- ä¹˜å®¢çš„å†å²è®¢å•ç»Ÿè®¡
- ä¹˜å®¢çš„ä¿¡ç”¨è¯„åˆ†
- å¸¸ç”¨åœ°å€æ”¶è—

### 2. å¯èƒ½ç¼ºå°‘çš„è¡¨
æ ¹æ®å®Œæ•´çš„ç½‘çº¦è½¦ç³»ç»Ÿï¼Œå¯èƒ½è¿˜éœ€è¦ï¼š

**æ”¯ä»˜ç›¸å…³è¡¨**:
- `payments` - æ”¯ä»˜è®°å½•è¡¨
- `refunds` - é€€æ¬¾è®°å½•è¡¨

**è¯„ä»·ç›¸å…³è¡¨**:
- `reviews` - è¯„ä»·è¡¨ï¼ˆå¸æœºè¯„ä»·ä¹˜å®¢ï¼Œä¹˜å®¢è¯„ä»·å¸æœºï¼‰

**ä¼˜æƒ ç›¸å…³è¡¨**:
- `coupons` - ä¼˜æƒ åˆ¸è¡¨
- `promotions` - ä¿ƒé”€æ´»åŠ¨è¡¨

**ç³»ç»Ÿé…ç½®è¡¨**:
- `system_configs` - ç³»ç»Ÿé…ç½®è¡¨
- `fare_rules` - è®¡è´¹è§„åˆ™è¡¨

### 3. ç´¢å¼•ä¼˜åŒ–å»ºè®®
```sql
-- è®¢å•è¡¨å¸¸ç”¨æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_orders_passenger_status ON orders(passenger_id, status);
CREATE INDEX idx_orders_driver_status ON orders(driver_id, status);
CREATE INDEX idx_orders_created_at ON orders(created_at);

-- å¸æœºè¡¨ä½ç½®æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_drivers_location ON drivers(current_latitude, current_longitude, is_online);

-- ç”¨æˆ·è¡¨ç™»å½•æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_phone ON users(phone);
```

## ğŸ“ æ€»ç»“

å½“å‰ç³»ç»Ÿçš„5ä¸ªè¡¨åŸºæœ¬æ»¡è¶³äº†ç½‘çº¦è½¦çš„æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚ï¼š
- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆusersï¼‰
- âœ… å¸æœºç®¡ç†ï¼ˆdriversï¼‰
- âœ… è½¦è¾†ç®¡ç†ï¼ˆvehiclesï¼‰
- âœ… è®¢å•ç®¡ç†ï¼ˆordersï¼‰
- âš ï¸ ä¹˜å®¢ç®¡ç†ï¼ˆpassengersï¼Œä½¿ç”¨ç‡ä½ï¼‰

ç³»ç»Ÿè®¾è®¡ç›¸å¯¹ç®€æ´ï¼Œæ ¸å¿ƒåŠŸèƒ½å®Œæ•´ï¼Œä½†åœ¨ä¹˜å®¢è¯¦ç»†ä¿¡æ¯ç®¡ç†å’Œä¸€äº›æ‰©å±•åŠŸèƒ½ï¼ˆæ”¯ä»˜ã€è¯„ä»·ã€ä¼˜æƒ ç­‰ï¼‰æ–¹é¢è¿˜æœ‰ä¼˜åŒ–ç©ºé—´ã€‚